/* Optimizaciones ultra-eficientes para el Sidebar */

/* Contenedor principal del sidebar - GPU acceleration y containment */
aside[role="navigation"] {
  transform: translateZ(0);
  backface-visibility: hidden;
  contain: layout style paint;
  will-change: width;
}

/* Estados específicos del sidebar para evitar recálculos */
aside[data-collapsed="true"] {
  contain: size layout style paint;
}

aside[data-collapsed="false"] {
  contain: layout style paint;
}

/* Optimización para transiciones rápidas y suaves */
aside .transition-all {
  transition-property: transform, opacity, padding, margin;
  transition-timing-function: cubic-bezier(0.25, 0.46, 0.45, 0.94);
  transition-duration: 120ms; /* Más rápido para toggles múltiples */
}

/* Contenido que puede causar reflow - contenerlo */
aside .truncate,
aside nav,
aside .space-y-2 > * {
  contain: layout;
}

/* Optimización para hover states - evitar layout thrashing */
aside a:hover,
aside button:hover {
  contain: layout style;
}

/* Forzar layer de composición para elementos animados */
aside img,
aside svg,
aside [class*="transition"] {
  will-change: auto;
  transform: translateZ(0);
}

/* Optimización específica para toggles rápidos múltiples */
@media (prefers-reduced-motion: no-preference) {
  aside {
    transition: width 400ms cubic-bezier(0.4, 0.0, 0.2, 1);
  }

  /* Evitar acumulación de transiciones en toggles rápidos */
  aside * {
    transition-delay: 0ms !important;
  }
}

/* Botón pestaña collapse/expand - Optimizaciones GPU */
button[aria-label*="sidebar"] {
  transform: translateZ(0);
  backface-visibility: hidden;
  will-change: transform, box-shadow, width, left;
  contain: layout style paint;
  /* Sombra personalizada para efecto de pestaña con color del sidebar */
  box-shadow:
    2px 0 8px -2px rgba(122, 114, 70, 0.2),
    4px 0 16px -4px rgba(122, 114, 70, 0.15),
    0 0 0 1px rgba(255, 255, 255, 0.1);
}

/* Animación suave de la pestaña en hover */
button[aria-label*="sidebar"]:hover {
  contain: layout style;
  box-shadow:
    3px 0 12px -2px rgba(122, 114, 70, 0.3),
    6px 0 20px -4px rgba(122, 114, 70, 0.2),
    0 0 0 1px rgba(255, 255, 255, 0.15);
}

/* Optimización para el icono dentro de la pestaña */
button[aria-label*="sidebar"] svg {
  will-change: auto;
  transform: translateZ(0);
  transition: transform 200ms ease-in-out;
  filter: drop-shadow(0 1px 2px rgba(0, 0, 0, 0.1));
}

/* Efecto sutil de hover en el icono */
button[aria-label*="sidebar"]:hover svg {
  transform: translateZ(0) translateX(1px);
  filter: drop-shadow(0 1px 3px rgba(0, 0, 0, 0.15));
}

/* Animación suave del logo - GPU accelerated */
aside img[alt="IPH Logo"] {
  transform: translateZ(0);
  backface-visibility: hidden;
  image-rendering: -webkit-optimize-contrast;
  image-rendering: crisp-edges;
}

/* Contenedor del logo con overflow suave */
aside img[alt="IPH Logo"] + * {
  contain: layout style;
}